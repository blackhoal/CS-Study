# 1. 쿠키(Cookie)
## 1-1. 개요
- 사용자가 어떠한 웹 사이트를 방문할 경우 해당 사이트가 사용하고 있는 서버에서 사용자의 컴퓨터에 저장하는 작은 기록 정보 파일
- 클라이언트 로컬에 저장되는 `Key-Value` 형태의 데이터 파일

## 1-2. 특징
- 이름(name), 값(value), 만료시간(Expires), 도메인(Domain), 경로(Path), 보안 여부(Secure) 등으로 구성
- 클라이언트의 상태 정보(이름, 값, 경로 등)를 브라우저에 저장하여 참조 및 재사용
- 서버 측에서 만료 시간을 지정하여 정해진 시간동안 사용자의 상태 정보를 유지 가능
- `세션 쿠키(Session Cookie)`와 `지속 쿠키(Persistent Cookie)`로 분류
  - 세션 쿠키 : `브라우저 메모리`에 저장되므로 브라우저가 종료되면 쿠키 또한 삭제
  - 지속 쿠키 : `파일`로 저장되므로 브라우저가 종료되어도 쿠키는 삭제 X

## 1-3. 동작 방식
![8-1](https://user-images.githubusercontent.com/48504392/128396810-8fa7deaf-89cf-4707-a866-ce2d329262e0.png)  

① 클라이언트가 페이지를 요청  

② 웹 서버에서 쿠키를 생성  

③ 생성한 쿠키에 정보를 담아 HTTP 화면과 함께 클라이언트에게 반환  

④ 반환한 쿠키는 클라이언트의 로컬 PC에 저장되어 다시 서버에 요청할 때 쿠키를 포함하여 전송  

⑤ 기존의 웹 페이지를 재방문 시 클라이언트의 PC에 해당 쿠키가 존재하는 경우 요청한 페이지와 함께 쿠키를 전송  

#

# 2. 세션(Session)
## 2-1. 개요
- 일정시간 동안 같은 브라우저로 들어오는 요청을 하나의 상태로 보고 그 상태를 유지하는 기술
- 서버(Server)에 클라이언트의 상태 정보를 저장하는 논리적인 연결 기술 
- 웹 브라우저를 통해 서버에 접속한 이후부터 브라우저를 종료할 때까지 유지되는 상태

## 2-2. 특징
- 세션 : 방문자가 웹 서버에 접속해 있는 상태에 대한 하나의 단위
- `쿠키`를 사용하여 값을 송수신하며 클라이언트의 상태 정보를 유지

## 2-3. 동작 방식
![8-2](https://user-images.githubusercontent.com/48504392/128396802-8e445d84-e149-46cf-9e56-9e91c3977c5f.png)  

① 클라이언트가 페이지를 요청  

② 서버는 요청한 클라이언트의 Request-Header 필드인 `쿠키(Cookie)`를 통해 클라이언트가 해당 `session-id`를 보냈는지 확인  

③ session-id가 존재하지 않을 경우 서버는 session-id를 생성하여 클라이언트에게 반환  

④ 서버에서 클라이언트로 반환한 session-id는 쿠키를 사용하여 서버에 저장(쿠키 이름 : JSESSIONID)  

⑤ 클라이언트가 해당 페이지를 재접속 시 기존의 쿠키(JSESSIONID)를 사용하여 session-id 값을 서버에 전달  

#

# 3. 쿠키(Cookie) VS 세션(Session)
# 3-1. 쿠키와 세션의 필요성
- HTTP 프로토콜의 `Connectionless` / `Stateless` 특징으로 인해 모든 요청 간에 의존 관계가 존재 X
  - 비연결 지향(Connectionless) : 클라이언트가 서버에 요청(Request) 시 해당되는 응답(Response)을 전송 후 연결을 끊는 처리방식
  - 상태 정보를 유지 X(Stateless) : 클라이언트의 상태 정보를 보유하지 않는 서버 처리 방식
  - 이러한 HTTP의 특징 때문에 현재 접속중인 사용자가 이전에 접속한 사용자와 같은 사용자인지 식별 불가
- 계속 유지를 하지 않아 리소스 낭비를 방지한다는 장점이 있으나, 클라이언트가 매번 접속 시 인증을 해야하므로 웹 페이지의 로딩을 느리게 만든다는 단점도 존재
- 따라서 이러한 문제점을 해결하고자 클라이언트와의 정보 유지를 위해 `쿠키(Cookie) & 세션(Session)`을 사용

# 3-2. 세션이 아닌 쿠키를 사용하는 이유
- 세션이 쿠키에 비해 보안적 측면에서 우수
- 그러나 세션은 `서버에 저장`되고 `서버의 리소스를 사용하므로` 사용자가 많을 경우 `대량의 자원을 소모`한다는 문제점이 존재
- 따라서 자원관리 차원에 의해 쿠키와 세션을 적절하게 병행 사용함으로써 서버 리소스의 낭비 방지 및 웹 사이트의 속도를 유지

# 3-3. 공통점
- 웹 통신 간에 로그인 정보 등 클라이언트와의 정보 유지가 필요한 데이터를 저장하기 위해 사용하는 개념

# 3-4. 차이점
||쿠키(Cookie)|세션(Session)|
|:--:|:--:|:--:|
|저장 위치|클라이언트|웹 서버|
|저장 형식|text|Object|
|만료 시점|쿠키 저장 시 설정(브라우저를 종료해도 아직 만료 시점이 아니면 자동 삭제 X)|브라우저 종료 시 삭제|
|사용 자원|클라이언트의 리소스|웹 서버의 리소스|
|용량 제한|총 300개 / 하나의 도메인 당 20개 / 하나의 쿠키 당 4KB|서버가 허용하는 내에서 제한 X|
|속도|쿠키 Win|세션 Lose|
|보안|쿠키 Lose|세션 Win|
|생명 주기|지속 쿠키의 경우에 브라우저를 종료하더라도 저장 가능 |서버에 만료시간을 정하여 삭제 가능|

#

# Reference
[참조 1](https://velog.io/@soosungp33/CS-Network#-%EC%BF%A0%ED%82%A4%EC%99%80-%EC%84%B8%EC%85%98)  
[참조 2](https://hahahoho5915.tistory.com/32)  
[참조 3](https://jeong-pro.tistory.com/80)  
