# 1. 프로세스(Process)
## 1-1. 개요
- 프로그램이 실제로 메모리에 적재 되어(loaded) 실행중인 인스턴스(instance)
- 운영체제로부터 시스템 자원을 할당 받는 작업의 단위
- 작업(Job), 태스크(Task)로도 지칭

## 1-2. 정의
1. PCB를 가진 프로그램
2. 실기억장치에 저장된 프로그램
3. 프로세서가 할당되는 실체로서, 디스패치가 가능한 단위
4. 프로시저가 활동중인 것
5. 비동기적 행위를 일으키는 주체
6. 지정된 결과를 얻기 위한 일련의 계통적 동작
7. 목적 또는 결과에 따라 발생되는 사건들의 과정
8. 운영체제가 관리하는 실행 단위

## 1-3. 특징
- `운영체제 프로세스`와 `사용자 프로세스`로 분류
- 각각 독립된 메모리 영역(Code, Data, Stack, Heap)을 할당
- 각 프로세스는 독립적인 주소 공간을 가지고 수행
- 프로세스가 다른 프로세스의 주소 공간을 참조하는 것은 허용 X
- 다른 프로세스의 자원에 접근하려면 `IPC(Inter-Process Communication)`을 사용
    - IPC(Inter-Process Communication) 
        - 파이프, 파일, 소켓 등을 이용한 통신 방식
        - 세마포어, 큐, 공유메모리 등

## 1-4. 프로세스의 메모리 구조
<p align="center"><img src="https://user-images.githubusercontent.com/48504392/129116095-ce976915-862d-4042-b049-f0ccd92c8c2e.png"></p>  

- 코드(Code) 영역
    - 실행할 프로그램의 코드가 저장되는 영역
    - 텍스트 영역
    - CPU는 코드 영역에 저장된 명령어를 하나씩 처리
- 데이터(Data) 영역
    - 프로그램의 전역 변수와 정적변수가 저장되는 영역
    - 프로그램 시작과 함꼐 할당이 되며 종료 시 소멸
- 힙(Heap) 영역
    - 사용자가 직접 관리하는 메모리 영역
    - 사용자에 의해 동적 할당 및 해제 수행
    - 낮은 주소에서 높은 주소의 방향으로 할당
- 스택(Stack) 영역
    - 함수의 호출과 관련된 지역 변수와 매개변수가 저장
    - 함수의 호출과 함께 할당되며 함수 호출이 완료된 후 소멸
    - 스택 프레임 : 스택 영역에 저장되는 함수 호출 정보

## 1-5. 프로세스의 상태
<p align="center"><img src="https://user-images.githubusercontent.com/48504392/129116437-482555f0-6fa8-4ffc-a80a-1a9888dfe808.png"></p>

- 생성(New) : 프로세스가 생성된 상태
- 준비(Ready) : 프로세스가 CPU에 실행되기 위해 대기중인 상태
- 실행(Running) : 프로세스에 포함된 명령어가 CPU에서 실행되고 있는 상태
- 대기(Waiting) : 프로세스가 특정 자원이나 이벤트를 기다리고 있는 상태
- 종료(Terminated) : 프로세스가 실행을 완료한 상태

|명칭|동작|설명|
|:--:|:--:|:--:|
|Dispatch|준비 → 실행|우선순위가 높은 프로세스를 선정 및 명령어 수행|
|Timer runout|실행 → 준비|클럭이 인터럽트를 발생시켜 제어권 강탈(Preemption)|
|Block|실행 → 대기|프로세서가 입출력, 자원 등을 위해 대기 상태로 전환|
|Wake up|대기 → 준비|입출력이 완료되거나 자원이 할당되어 재실행|

## 1-6. PCB(Process Control Block)
<p align="center"><img src="https://user-images.githubusercontent.com/48504392/129116926-b20d80ab-2092-464e-84d1-2f40a7ccc7c6.png"></p>
- 특정한 프로세스를 관리 시 필요한 정보를 저장하는 운영체제 커널의 자료구조
- 프로세스가 생성될 때마다 고유의 PCB가 생성

## 1-7. 문맥 교환(Context Switch)
- 다른 프로세스의 수행을 위해 실행되고 있는 프로세스의 현재 상태를 저장하는 절차
- 현재 CPU를 사용중인 프로세스의 CPU 제어권이 다른 프로세스로 이양되는 과정
- 문맥 교환에 소요되는 시간은 시스템 입장에서는 일종의 오버헤드(overhead)
    - 오버헤드(overhead) : 특정한 기능을 수행하기 위해 추가로 사용되는 컴퓨터 자원
    - 문맥 교환 중 일어나는 작업이 실제 시스템에게 유용 X

#
# 2. 쓰레드(Thread)
## 2-1. 개요
- 프로세스가 할당 받은 자원을 이용하는 실행 단위
- 프로세스 내에서 여러 작업을 병렬적으로 수행될 수 있도록 작업을 나눈 실행 단위

## 2-2. 특징
<p align="center"><img src="https://user-images.githubusercontent.com/48504392/129282381-add09eef-09ef-4017-b482-f9f1ee64362f.png"></p>

- 기본적으로 프로세스는 최소 1개의 쓰레드를 보유
- 쓰레드 생성 시 스택 영역만 할당받고 코드, 데이터, 힙 영역은 프로세스의 자원과 공유
- 각각의 쓰레드는 자신이 속한 프로세스와 타 쓰레드의 주소 영역(스택을 제외한 나머지 - 코드, 데이터, 힙 영역)에 대한 접근 및 공유가 가능
    - 이러한 특징 때문에 자식 프로세스를 사용하지 않고 쓰레드를 사용
    - 원칙적으로 하나의 프로세스는 타 프로세스에 영향을 줄 수 없으므로 자식 프로세스는 부모 프로세스의 주소 영역에 접근 불가
    - 부모-자식 프로세스는 사실상 자원을 놓고 경쟁하는 관계

#
# 3. Process VS Thread
||프로세스|쓰레드|
|:--:|:--:|:--:|
|정의|실행중인 프로그램|프로세스의 실행 단위|
|생성 및 종료 시간|많은 시간 소요|적은 시간 소요|
|문맥 교환|많은 시간 소요|적은 시간 소요|
|상호작용|IPC 사용|공유 메모리 사용|
|자원 소모|많음|적음|
|독립성|각각 독립적|스택만 독립적이며 그 외에는 공유|

#
# Reference
[참조 1](https://cryptosalamander.tistory.com/121)  
[참조 2](https://velog.io/@grinding_hannah/CS-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4Process-%EC%93%B0%EB%A0%88%EB%93%9CThread)  
[참조 3](https://kosaf04pyh.tistory.com/38?category=1032510)  
[참조 4](https://haedallog.tistory.com/138)  